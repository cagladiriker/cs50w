{% extends "potbs/layout.html" %}
{% load static %}

{% block script %}
    <script src="{% static 'potbs/events.js' %}"></script>
{% endblock %}


{% block body %}
<div id="new_event_form" style="display:none; margin: 20px;">
  <form class="row g-3" action="{% url 'new_event'%}" method="post" enctype="multipart/form-data">
    {% csrf_token %}
      <div class="col-md-6">
        <label class="form-label"><strong>Name</strong></label>
        <input type="text" class="form-control" id="name" name="name">
      </div>
      <div class="col-12">
        <label class="form-label"><strong>Description</strong></label>
        <input type="textarea" class="form-control" id="description" name="description">
      </div>
      <div class="col-md-6">
        <label class="form-label"><strong>Poster</strong></label>
        <input type="file" class="form-control" id="poster" name="poster">
      </div>
      <div class="col-md-6">
        <label class="form-label"><strong>Date</strong></label>
        <input type="datetime-local" class="form-control" id="date" name="date">
      </div>
      <div class="col-md-6">
        <label class="form-label"><strong>Country</strong></label>
        <input type="text" class="form-control" id="country" name="country">
      </div>
      <div class="col-md-6">
        <label class="form-label"><strong>City</strong></label>
        <input type="text" class="form-control" id="city" name="city">
      </div>
      <div class="col-md-6">
        <div class="col-md-12">
            <label class="form-label"><strong>Map Link</strong></label>
            <input type="url" class="form-control" id="map_url" name="map_url">
          </div>
        <input type="submit" class="btn btn-dark" id="submit" value="Submit" style="margin-top: 10px;">
      </div>
    </form>
    <div class="col-md-6">
      <button class="btn btn-danger" id="cancel" name="cancel" style="margin-top: 10px;">Cancel</button>
    </div>
</div>

<div id="content" style="display: block;">
  {% if user.is_superuser %}
    <div class="d-grid gap-2 col-4 mx-auto">
      <button id="new_event" class="btn btn-dark" type="button" style="margin-bottom: 10px;">Create New Event</button>
    </div>
  {% endif %}

  <div class="row events">
  {% for event in events %}
      <div class="col-md-4 item-col">
        <div class="item-card">
          {% if event.event_poster %}
          <img class="card-img-top" src="{{event.event_poster.url}}" alt="Card image cap">
          {% endif %}
          <div class="card-body">
            <h3 class="card-name">{{event.event_name}}</h3>
            <p class="card-text">{{event.event_description}}</p>
            <div class="card-bottom mt-auto">
                <p class="card-text"><small class="muted">{{event.event_city}}, {{event.event_country}}</small></p>
                <p class="card-text"><small class="muted">{{event.event_date}}</small></p>
                <a href="{{event.map_url}}" target="_blank"><button id="map_button" class="btn map">See on Map</button></a>
            </div>
          </div>
        </div>
      </div>
  {% endfor %}
  </div>
</div>
{% endblock %}
